<div class="!p-6 !bg-white !border !border-gray-200 !rounded-lg !shadow-md">
  <div [formGroup]="userForm" class="flex flex-row justify-end items-center">
    <app-language-switch formControlName="langPref" />
  </div>
  <form
    [formGroup]="userForm"
    *ngIf="editMode; else viewModeTemplate"
    class="min-h-[20dvh]">
    <nz-input-group nzCompact class="!mb-2 !mt-2">
      <input
        nz-input
        [placeholder]="
          ('COMMON.PERSONAL_DETAILS.FIRST_NAME' | translate | async) ||
          'First Name'
        "
        formControlName="firstName"
        class="!w-full !px-3 !py-2 !border !border-gray-300 !rounded-md !focus:outline-none !focus:ring-2 !focus:ring-indigo-500" />
    </nz-input-group>
    <!-- Validation messages for first name -->
    <nz-input-group nzCompact class="!mb-2">
      <input
        nz-input
        [placeholder]="
          ('COMMON.PERSONAL_DETAILS.LAST_NAME' | translate | async) ||
          'Last Name'
        "
        formControlName="lastName"
        class="!w-full !px-3 !py-2 !border !border-gray-300 !rounded-md !focus:outline-none !focus:ring-2 !focus:ring-indigo-500" />
    </nz-input-group>
    <!-- Validation messages for last name -->
    <nz-input-group nzCompact class="!mb-2">
      <input
        class="!w-full !px-3 !py-2 !border !border-gray-300 !rounded-md !focus:outline-none !focus:ring-2 !focus:ring-indigo-500"
        nz-input
        type="email"
        [placeholder]="
          ('COMMON.COMMUNICATION.EMAIL' | translate | async) || 'Email'
        "
        formControlName="email" />
    </nz-input-group>
    <!-- Validation messages for email -->
    <div class="flex flex-row gap-4">
      <button
        [disabled]="userForm.invalid || userForm.pristine"
        type="button"
        nz-button
        nzType="default"
        (click)="onSaveChanges()">
        {{ ('COMMON.ACTIONS.SAVE' | translate | async) || 'Save' }}
      </button>
      <button
        type="button"
        nz-button
        nzType="default"
        (click)="toggleEditMode()">
        {{ ('COMMON.ACTIONS.CANCEL' | translate | async) || 'Cancel' }}
      </button>
    </div>
  </form>

  <ng-template #viewModeTemplate>
    <div class="min-h-[20dvh] gap-4">
      <p class="!px-3 !py-2">
        <strong
          >{{
            ('COMMON.PERSONAL_DETAILS.FIRST_NAME' | translate | async) ||
              'First Name'
          }}:</strong
        >
        {{ user.user_metadata.firstName }}
      </p>
      <p class="!px-3 !py-2">
        <strong
          >{{
            ('COMMON.PERSONAL_DETAILS.LAST_NAME' | translate | async) ||
              'Last Name'
          }}:</strong
        >
        {{ user.user_metadata.lastName }}
      </p>
      <p class="!px-3 !py-2">
        <strong
          >{{
            ('COMMON.COMMUNICATION.EMAIL' | translate | async) || 'Email'
          }}:</strong
        >
        {{ user.email }}
      </p>
      <!-- Display other user details -->
      <button
        type="button"
        nz-button
        nzType="primary"
        (click)="toggleEditMode()">
        {{ ('COMMON.ACTIONS.EDIT' | translate | async) || 'Edit' }}
      </button>
    </div>
  </ng-template>
</div>
