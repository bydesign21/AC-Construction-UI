<div class="flex flex-col mt-[1rem] min-w-full overflow-hidden">
  <div class="overflow-auto max-h-[80dvh]">
    <div class="flex flex-row gap-4 mx-2 items-center justify-between">
      <div>
        <nz-form-label
          class="!text-left [&>*]:!text-lg"
          [nzNoColon]="true"
          [nzRequired]="true">
          Employee
        </nz-form-label>
        <div class="w-[12rem]">
          <input
            type="text"
            nz-input
            [nzAutocomplete]="employeeAuto"
            [(ngModel)]="selectedEmployee"
            (ngModelChange)="handleEmployeeChanged($event)"
            placeholder="Select or type an employee name" />

          <nz-autocomplete #employeeAuto>
            <nz-auto-option
              *ngFor="let employee of employeeList"
              [nzValue]="employee.name"
              [nzLabel]="employee.name">
              <span>{{ employee.name }}</span>
            </nz-auto-option>
          </nz-autocomplete>
          <!-- TODO: Append autocomplete dropdown to input on open -->
        </div>
      </div>
      <div class="flex flex-row gap-2">
        <button
          nz-button
          title="Download Report"
          class="!rounded-lg !items-center justify-center !flex !flex-col relative">
          <div class="flex flex-row gap-1 items-center">
            <span class="sr-only">Download Report</span>
            <span
              class="items-center flex flex-col justify-center"
              nz-icon
              [nzType]="'download'"
              nzTheme="outline"></span>
          </div>
        </button>
        <button
          nz-button
          title="Print Report"
          class="!rounded-lg !items-center justify-center !flex !flex-col relative">
          <div class="flex flex-row gap-1 items-center">
            <span class="sr-only">Print Report</span>
            <span
              class="items-center flex flex-col justify-center"
              nz-icon
              [nzType]="'printer'"
              nzTheme="outline"></span>
          </div>
        </button>
        <button
          nz-button
          title="Email Report"
          class="!rounded-lg !items-center justify-center !flex !flex-col relative">
          <div class="flex flex-row gap-1 items-center">
            <span class="sr-only">Email Report</span>
            <span
              class="items-center flex flex-col justify-center"
              nz-icon
              [nzType]="'mail'"
              nzTheme="outline"></span>
          </div>
        </button>
      </div>
    </div>
    <app-check-item-list
      #checkItemListComponent
      [items]="checkItemList"
      (addItemRequest)="handleAddLineItem()"
      (itemDeleted)="handleDeleteLineItem($event)"
      (changed)="handleLineItemsChanged($event)"
      (isValid)="handleIsValid($event)"
      class="[&>*]:mt-4"></app-check-item-list>
  </div>
</div>

<ng-template #modalFooter>
  <button nz-button nzType="default" (click)="onCancel()">Cancel</button>
  <button
    nz-button
    nzType="primary"
    [disabled]="!isFormValid()"
    (click)="submitForm()">
    {{ data?.check || check ? 'Update' : 'Create' }}
  </button>
</ng-template>
